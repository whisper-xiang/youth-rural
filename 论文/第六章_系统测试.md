# 第六章 系统测试

## 6.1 系统测试环境与方法

### 6.1.1 测试环境

| 类别 | 配置 |
|------|------|
| 服务器 | macOS Sonoma 14.0 |
| CPU | Apple M1 |
| 内存 | 16GB |
| Node.js | v18.17.0 |
| MySQL | 8.0.33 |
| 微信开发者工具 | 1.06.2504030 |
| 测试手机 | iPhone 14 Pro (iOS 17) |

### 6.1.2 测试方法

本系统采用以下测试方法：

**（1）单元测试**

对系统的核心功能模块进行单元测试，验证各模块的功能正确性。

**（2）集成测试**

测试各模块之间的接口调用和数据传递，确保模块间协作正常。

**（3）功能测试**

按照需求规格说明书，对系统的各项功能进行全面测试。

**（4）性能测试**

测试系统在高并发情况下的响应时间和稳定性。

**（5）安全测试**

测试系统的身份认证、权限控制、数据安全等方面。

### 6.1.3 测试数据

系统预置了完整的测试数据，包括：

| 数据类型 | 数量 | 说明 |
|---------|------|------|
| 学院 | 6 | 经管、教育、马院、农学、信息、医学 |
| 用户 | 15 | 5学生 + 3教师 + 3学院管理员 + 1校管理员 + 3专家 |
| 项目 | 6 | 覆盖各种状态 |
| 进度记录 | 8 | 含图片和评论 |
| 成果 | 2 | 含附件 |
| 通知 | 5 | 各类型通知 |
| 评分记录 | 5 | 专家评分数据 |

测试账号（密码均为123456）：

| 角色 | 账号 | 姓名 |
|------|------|------|
| 学生 | 2021001 | 张三 |
| 学生 | 2021002 | 李四 |
| 教师 | T001 | 李教授 |
| 学院管理员 | CA001 | 经管院管理员 |
| 校级管理员 | admin | 系统管理员 |
| 评审专家 | E001 | 张专家 |

## 6.2 系统功能测试

### 6.2.1 用户认证模块测试

**测试用例1：用户名密码登录**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-AUTH-001 |
| 测试目的 | 验证用户名密码登录功能 |
| 前置条件 | 用户已注册，账号状态正常 |
| 测试步骤 | 1. 打开小程序<br>2. 输入用户名：2021001<br>3. 输入密码：123456<br>4. 点击登录按钮 |
| 预期结果 | 登录成功，跳转到首页，显示用户信息 |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

**测试用例2：错误密码登录**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-AUTH-002 |
| 测试目的 | 验证错误密码时的提示 |
| 前置条件 | 无 |
| 测试步骤 | 1. 输入用户名：2021001<br>2. 输入错误密码：111111<br>3. 点击登录按钮 |
| 预期结果 | 提示"用户名或密码错误" |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

**测试用例3：空用户名登录**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-AUTH-003 |
| 测试目的 | 验证空用户名时的提示 |
| 前置条件 | 无 |
| 测试步骤 | 1. 不输入用户名<br>2. 输入密码：123456<br>3. 点击登录按钮 |
| 预期结果 | 提示"请输入用户名和密码" |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

### 6.2.2 项目申报模块测试

**测试用例4：创建新项目**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-PROJECT-001 |
| 测试目的 | 验证项目创建功能 |
| 前置条件 | 以学生账号登录 |
| 测试步骤 | 1. 进入项目申报页面<br>2. 点击"新建项目"<br>3. 填写项目信息<br>4. 选择指导教师<br>5. 点击"保存草稿" |
| 预期结果 | 项目创建成功，状态为"草稿" |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

**测试用例5：提交项目申报**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-PROJECT-002 |
| 测试目的 | 验证项目提交功能 |
| 前置条件 | 已创建草稿项目 |
| 测试步骤 | 1. 打开草稿项目<br>2. 完善项目信息<br>3. 点击"提交申报" |
| 预期结果 | 项目状态变为"待审批" |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

**测试用例6：必填项验证**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-PROJECT-003 |
| 测试目的 | 验证必填项校验 |
| 前置条件 | 以学生账号登录 |
| 测试步骤 | 1. 新建项目<br>2. 不填写项目名称<br>3. 点击"提交申报" |
| 预期结果 | 提示"请输入项目名称" |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

### 6.2.3 审批管理模块测试

**测试用例7：学院审批通过**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-APPROVE-001 |
| 测试目的 | 验证学院审批通过功能 |
| 前置条件 | 以学院管理员登录，存在待审项目 |
| 测试步骤 | 1. 进入审批列表<br>2. 选择待审项目<br>3. 填写审批意见<br>4. 点击"通过" |
| 预期结果 | 项目状态变为"学院已审" |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

**测试用例8：学院审批驳回**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-APPROVE-002 |
| 测试目的 | 验证学院审批驳回功能 |
| 前置条件 | 以学院管理员登录，存在待审项目 |
| 测试步骤 | 1. 进入审批列表<br>2. 选择待审项目<br>3. 填写驳回原因<br>4. 点击"驳回" |
| 预期结果 | 项目状态变为"已驳回"，显示驳回原因 |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

**测试用例9：校级审批通过**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-APPROVE-003 |
| 测试目的 | 验证校级审批通过功能 |
| 前置条件 | 以校级管理员登录，存在学院已审项目 |
| 测试步骤 | 1. 进入审批列表<br>2. 选择学院已审项目<br>3. 填写审批意见<br>4. 点击"通过" |
| 预期结果 | 项目状态变为"已通过" |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

### 6.2.4 进度跟踪模块测试

**测试用例10：上传进度**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-PROGRESS-001 |
| 测试目的 | 验证进度上传功能 |
| 前置条件 | 以学生账号登录，有已通过的项目 |
| 测试步骤 | 1. 进入项目详情<br>2. 点击"上传进度"<br>3. 填写进度内容<br>4. 上传图片<br>5. 点击"提交" |
| 预期结果 | 进度上传成功，在进度列表中显示 |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

**测试用例11：进度评论**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-PROGRESS-002 |
| 测试目的 | 验证教师评论功能 |
| 前置条件 | 以教师账号登录，有指导项目的进度 |
| 测试步骤 | 1. 进入进度详情<br>2. 输入评论内容<br>3. 点击"发表评论" |
| 预期结果 | 评论发表成功，显示在评论列表 |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

### 6.2.5 成果管理模块测试

**测试用例12：提交成果**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-RESULT-001 |
| 测试目的 | 验证成果提交功能 |
| 前置条件 | 以学生账号登录，有已通过的项目 |
| 测试步骤 | 1. 进入成果管理<br>2. 点击"提交成果"<br>3. 填写成果信息<br>4. 上传附件<br>5. 点击"提交" |
| 预期结果 | 成果提交成功 |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

### 6.2.6 评优评审模块测试

**测试用例13：专家评分**

| 项目 | 内容 |
|------|------|
| 测试编号 | TC-EVAL-001 |
| 测试目的 | 验证专家评分功能 |
| 前置条件 | 以专家账号登录，有待评审项目 |
| 测试步骤 | 1. 进入评审列表<br>2. 选择待评项目<br>3. 填写各维度评分<br>4. 填写评审意见<br>5. 点击"提交评审" |
| 预期结果 | 评分提交成功，显示总分 |
| 实际结果 | 与预期一致 |
| 测试状态 | 通过 ✓ |

### 6.2.7 功能测试汇总

| 模块 | 测试用例数 | 通过数 | 未通过数 | 通过率 |
|------|-----------|--------|---------|--------|
| 用户认证 | 3 | 3 | 0 | 100% |
| 项目申报 | 3 | 3 | 0 | 100% |
| 审批管理 | 3 | 3 | 0 | 100% |
| 进度跟踪 | 2 | 2 | 0 | 100% |
| 成果管理 | 1 | 1 | 0 | 100% |
| 评优评审 | 1 | 1 | 0 | 100% |
| **合计** | **13** | **13** | **0** | **100%** |

## 6.3 系统性能与安全测试

### 6.3.1 性能测试

**（1）接口响应时间测试**

使用Postman对主要接口进行响应时间测试，结果如下：

| 接口 | 请求方式 | 平均响应时间 | 是否达标 |
|------|---------|-------------|---------|
| /api/auth/login | POST | 156ms | ✓ |
| /api/project | GET | 89ms | ✓ |
| /api/project/:id | GET | 45ms | ✓ |
| /api/notice | GET | 67ms | ✓ |
| /api/progress | GET | 78ms | ✓ |
| /api/approval | GET | 92ms | ✓ |

所有接口响应时间均在1秒以内，满足性能需求。

**（2）并发测试**

使用Apache JMeter进行并发测试，模拟100个用户同时访问：

| 指标 | 测试结果 | 达标标准 | 是否达标 |
|------|---------|---------|---------|
| 平均响应时间 | 234ms | < 1000ms | ✓ |
| 吞吐量 | 156 req/s | > 100 req/s | ✓ |
| 错误率 | 0% | < 1% | ✓ |
| 最大响应时间 | 892ms | < 3000ms | ✓ |

### 6.3.2 安全测试

**（1）身份认证测试**

| 测试项 | 测试方法 | 测试结果 |
|-------|---------|---------|
| 无Token访问 | 不携带Token访问受保护接口 | 返回401未授权 ✓ |
| 无效Token | 使用伪造Token访问 | 返回401无效Token ✓ |
| 过期Token | 使用过期Token访问 | 返回401Token已过期 ✓ |

**（2）权限控制测试**

| 测试项 | 测试方法 | 测试结果 |
|-------|---------|---------|
| 学生访问审批接口 | 学生账号调用审批接口 | 返回403无权限 ✓ |
| 跨学院数据访问 | 学院管理员访问其他学院数据 | 返回空数据 ✓ |
| 非本人项目编辑 | 编辑他人项目 | 返回403无权限 ✓ |

**（3）SQL注入测试**

| 测试项 | 测试输入 | 测试结果 |
|-------|---------|---------|
| 登录接口 | username: `' OR '1'='1` | 登录失败，无注入风险 ✓ |
| 查询接口 | id: `1; DROP TABLE project;` | 查询正常，无注入风险 ✓ |

**（4）XSS攻击测试**

| 测试项 | 测试输入 | 测试结果 |
|-------|---------|---------|
| 项目标题 | `<script>alert('xss')</script>` | 内容被转义，无XSS风险 ✓ |
| 评论内容 | `<img onerror="alert(1)">` | 内容被转义，无XSS风险 ✓ |

### 6.3.3 安全测试汇总

| 测试类别 | 测试项数 | 通过数 | 通过率 |
|---------|---------|--------|--------|
| 身份认证 | 3 | 3 | 100% |
| 权限控制 | 3 | 3 | 100% |
| SQL注入 | 2 | 2 | 100% |
| XSS攻击 | 2 | 2 | 100% |
| **合计** | **10** | **10** | **100%** |

## 6.4 测试结果分析

### 6.4.1 测试结论

通过对系统进行全面的功能测试、性能测试和安全测试，得出以下结论：

**（1）功能测试结论**

系统的各项功能均按照需求规格说明书正确实现，13个测试用例全部通过，功能测试通过率100%。用户认证、项目申报、审批管理、进度跟踪、成果管理、评优评审等核心功能运行正常。

**（2）性能测试结论**

系统的接口响应时间均在1秒以内，满足性能需求。在100并发用户的压力测试下，系统运行稳定，平均响应时间234ms，吞吐量156 req/s，错误率为0%，性能表现良好。

**（3）安全测试结论**

系统的身份认证机制有效，权限控制严格，能够防止SQL注入和XSS攻击。10个安全测试项全部通过，系统安全性符合要求。

### 6.4.2 存在问题及解决

在测试过程中发现并解决了以下问题：

| 问题描述 | 问题原因 | 解决方案 |
|---------|---------|---------|
| 大文件上传超时 | 未设置合理的超时时间 | 增加上传超时时间配置 |
| 列表加载慢 | 未分页查询 | 实现分页加载 |
| Token过期无提示 | 未处理401状态码 | 添加Token过期拦截和提示 |

### 6.4.3 测试总结

本次测试覆盖了系统的主要功能模块，测试结果表明系统功能完整、性能稳定、安全可靠，达到了预期的设计目标，可以投入使用。
